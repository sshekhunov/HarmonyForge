<!-- Loading State -->
<div *ngIf="loading" class="loading-container">
  <div class="loading-content">
    <p-progressSpinner
      [style]="{'width': '50px', 'height': '50px'}"
      strokeWidth="4"
      fill="transparent"
      animationDuration="1s">
    </p-progressSpinner>
    <p class="loading-text">Загрузка...</p>
  </div>
</div>

<div *ngIf="article && !loading" class="article-detail-container">
  <!-- Header -->
  <div class="article-header">
    <a class="back-link" (click)="onGoBack()">
      <i class="pi pi-arrow-left"></i> Назад к модулям
    </a>
    <div class="article-header-content article-title-section">
      <h1 class="article-title">{{ article.title }}</h1>
      <h2 class="article-subtitle" *ngIf="moduleTitle">{{ moduleTitle }}</h2>
    </div>
  </div>

  <div class="article-content-wrapper">
    <div class="learning-article-container">
      <!-- Article Content -->
      <div class="article-content">
    <div *ngIf="article.contentSections.length === 0" class="no-content">
      <i class="pi pi-file-o no-content-icon"></i>
      <p>Контент статьи пока недоступен.</p>
    </div>

    <!-- Content Sections -->
    <div *ngFor="let section of article.contentSections; trackBy: trackBySectionOrder"
         class="content-section">

      <!-- Section Card (Header + Content) -->
      <div class="section-card">
        <!-- Section Header -->
        <div class="section-header" *ngIf="section.title">
          <h3 class="section-title">{{ section.title }}</h3>
        </div>

        <!-- Section Content Items -->
        <app-learning-content-renderer
          [contentItems]="section.contentItems"
          [sectionTitle]="section.title">
        </app-learning-content-renderer>
      </div>
      </div>
    </div>
  </div>
</div>
</div>

<!-- No Article State -->
<div *ngIf="!article && !loading" class="no-article">
  <i class="pi pi-file-o no-article-icon"></i>
  <p>Статья не найдена или не загружена.</p>
</div>
